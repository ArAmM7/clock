import 'package:flutter/foundation.dart';
import 'package:flutter/scheduler.dart';

class Valodik with ChangeNotifier, DiagnosticableTreeMixin {
  //Timer? _timer;
  Ticker? _ticker;
  Duration _previouslyElapsed = Duration.zero;
  Duration _currentlyElapsed = Duration.zero;
  //DateTime _initialTime = DateTime.now();

  Duration get elapsed {
    return _currentlyElapsed + _previouslyElapsed;
  }

  void start() {
    //_initialTime = DateTime.now();
    // _timer = Timer.periodic(
    //   const Duration(milliseconds: 16),
    //   (timer) {
    //     _currentlyElapsed = DateTime.now().difference(_initialTime);
    //     notifyListeners();
    //   },
    //);
    _ticker = Ticker((elapsed) {
      _currentlyElapsed = elapsed;
      notifyListeners();
    });
    _ticker!.start();
  }

  void stop() {
    //_timer!.cancel();
    _ticker!.stop();
    _previouslyElapsed += _currentlyElapsed;
    _currentlyElapsed = Duration.zero;
    notifyListeners();
  }

  void reset() {
    //_timer!.cancel();
    _ticker!.dispose();
    _previouslyElapsed = Duration.zero;
    _currentlyElapsed = Duration.zero;
    notifyListeners();
  }

  void lap() {
  }
}
